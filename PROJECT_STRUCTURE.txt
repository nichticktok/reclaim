================================================================================
                    RECALIM PROJECT STRUCTURE DOCUMENTATION
================================================================================

This document details the complete file structure and organization of the
Recalim Flutter project, following a feature-first architecture pattern.

================================================================================
                            ROOT DIRECTORY STRUCTURE
================================================================================

recalim/
â”œâ”€â”€ lib/                          # Main application code
â”œâ”€â”€ assets/                       # Images, icons, fonts, etc.
â”œâ”€â”€ android/                      # Android platform-specific code
â”œâ”€â”€ ios/                          # iOS platform-specific code
â”œâ”€â”€ web/                          # Web platform-specific code
â”œâ”€â”€ test/                         # Unit and widget tests
â”œâ”€â”€ pubspec.yaml                  # Flutter dependencies
â””â”€â”€ README.md                     # Project documentation

================================================================================
                          LIB DIRECTORY STRUCTURE
================================================================================

lib/
â”‚
â”œâ”€â”€ main.dart                     # Application entry point
â”‚
â”œâ”€â”€ core/                         # CORE - Shared utilities and configurations
â”‚   â”œâ”€â”€ constants/                # App-wide constants
â”‚   â”‚   â””â”€â”€ (constant files)
â”‚   â”œâ”€â”€ errors/                   # Error handling and custom exceptions
â”‚   â”‚   â””â”€â”€ (error classes)
â”‚   â”œâ”€â”€ firebase/                 # Firebase configuration and setup
â”‚   â”‚   â””â”€â”€ (firebase config files)
â”‚   â”œâ”€â”€ theme/                    # App theme, colors, text styles
â”‚   â”‚   â””â”€â”€ (theme files)
â”‚   â””â”€â”€ utils/                     # Utility functions and helpers
â”‚       â””â”€â”€ (utility files)
â”‚
â”œâ”€â”€ features/                     # FEATURES - Feature-based modules
â”‚   â”‚
â”‚   â”œâ”€â”€ auth/                     # Authentication Feature
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â””â”€â”€ auth_controller.dart      # Auth business logic & state
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ (auth services if needed)
â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â””â”€â”€ sign_in_screen.dart       # Sign-in UI
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â””â”€â”€ (auth-specific models)
â”‚   â”‚   â””â”€â”€ widgets/
â”‚   â”‚       â””â”€â”€ (auth-specific widgets)
â”‚   â”‚
â”‚   â”œâ”€â”€ home/                     # Home/Dashboard Feature
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â””â”€â”€ home_controller.dart      # Home state management
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ home_service.dart         # User data loading
â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â””â”€â”€ home_screen.dart          # Main home screen
â”‚   â”‚   â””â”€â”€ widgets/
â”‚   â”‚       â””â”€â”€ (home-specific widgets)
â”‚   â”‚
â”‚   â”œâ”€â”€ onboarding/               # Onboarding Flow Feature
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â””â”€â”€ onboarding_controller.dart  # Onboarding state & logic
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ onboarding_service.dart      # Onboarding data operations
â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â”œâ”€â”€ onboarding_screen.dart     # Main onboarding coordinator
â”‚   â”‚   â”‚   â”œâ”€â”€ onboarding_intro.dart      # Introduction screen
â”‚   â”‚   â”‚   â”œâ”€â”€ onboarding_name.dart       # Name input screen
â”‚   â”‚   â”‚   â”œâ”€â”€ onboarding_age.dart        # Age selection screen
â”‚   â”‚   â”‚   â”œâ”€â”€ onboarding_gender.dart     # Gender selection screen
â”‚   â”‚   â”‚   â”œâ”€â”€ onboarding_life_description.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ onboarding_character.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ onboarding_confirm_age.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ onboarding_notification.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ onboarding_awakening.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ onboarding_main_character.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ onboarding_journey_drive.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ onboarding_dark_habits.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ onboarding_transformation.dart
â”‚   â”‚   â”‚   â””â”€â”€ (other onboarding screens)
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â””â”€â”€ (onboarding-specific models)
â”‚   â”‚   â””â”€â”€ widgets/
â”‚   â”‚       â””â”€â”€ onboarding_header.dart    # Shared onboarding header
â”‚   â”‚
â”‚   â”œâ”€â”€ tasks/                     # Tasks/Habits Feature
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â””â”€â”€ tasks_controller.dart     # Tasks state management
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ tasks_service.dart        # Tasks data operations
â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â”œâ”€â”€ daily_tasks_screen.dart   # Daily tasks list
â”‚   â”‚   â”‚   â””â”€â”€ task_detail_screen.dart   # Task detail view
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â””â”€â”€ (task-specific models)
â”‚   â”‚   â””â”€â”€ widgets/
â”‚   â”‚       â””â”€â”€ (task-specific widgets)
â”‚   â”‚
â”‚   â”œâ”€â”€ progress/                  # Progress Tracking Feature
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â””â”€â”€ progress_controller.dart  # Progress state management
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ progress_service.dart     # Progress data operations
â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â””â”€â”€ progress_screen.dart      # Progress visualization
â”‚   â”‚   â””â”€â”€ widgets/
â”‚   â”‚       â””â”€â”€ (progress-specific widgets)
â”‚   â”‚
â”‚   â”œâ”€â”€ profile/                   # User Profile Feature
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â””â”€â”€ profile_controller.dart   # Profile state management
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ profile_service.dart      # Profile data operations
â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â””â”€â”€ profile_screen.dart       # Profile UI
â”‚   â”‚   â””â”€â”€ widgets/
â”‚   â”‚       â””â”€â”€ (profile-specific widgets)
â”‚   â”‚
â”‚   â”œâ”€â”€ community/                 # Community Feature
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â””â”€â”€ community_controller.dart # Community state management
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ community_service.dart    # Community data operations
â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â””â”€â”€ community_screen.dart     # Community feed
â”‚   â”‚   â””â”€â”€ widgets/
â”‚   â”‚       â””â”€â”€ (community-specific widgets)
â”‚   â”‚
â”‚   â””â”€â”€ reflection/                # Reflection Feature
â”‚       â”œâ”€â”€ controllers/
â”‚       â”‚   â””â”€â”€ reflection_controller.dart # Reflection state management
â”‚       â”œâ”€â”€ services/
â”‚       â”‚   â””â”€â”€ reflection_service.dart    # Reflection data operations
â”‚       â”œâ”€â”€ screens/
â”‚       â”‚   â””â”€â”€ reflection_screen.dart    # Reflection UI
â”‚       â””â”€â”€ widgets/
â”‚           â””â”€â”€ (reflection-specific widgets)
â”‚
â”œâ”€â”€ models/                        # SHARED MODELS - Used across features
â”‚   â”œâ”€â”€ user_model.dart           # User data model
â”‚   â”œâ”€â”€ habit_model.dart          # Habit/Task model
â”‚   â””â”€â”€ progress_model.dart       # Progress tracking model
â”‚
â”œâ”€â”€ providers/                     # GLOBAL PROVIDERS - App-wide state
â”‚   â””â”€â”€ language_provider.dart    # Language/localization provider
â”‚
â”œâ”€â”€ widgets/                       # SHARED WIDGETS - Reusable UI components
â”‚   â”œâ”€â”€ custom_button.dart        # Custom button widget
â”‚   â”œâ”€â”€ habit_card.dart           # Habit display card
â”‚   â”œâ”€â”€ progress_ring.dart        # Progress visualization
â”‚   â”œâ”€â”€ proof_input_box.dart      # Proof submission input
â”‚   â”œâ”€â”€ reflection_card.dart      # Reflection input card
â”‚   â””â”€â”€ onboarding_header.dart    # (Moved to features/onboarding/widgets)
â”‚
â”œâ”€â”€ routes/                        # Navigation routes (if using named routes)
â”‚   â””â”€â”€ (route definitions)
â”‚
â”œâ”€â”€ data/                          # DATA LAYER - Repositories and data sources
â”‚   â”œâ”€â”€ repositories/
â”‚   â”‚   â””â”€â”€ (repository implementations)
â”‚   â”œâ”€â”€ habit_repository.dart
â”‚   â””â”€â”€ firestore_habit_repository.dart
â”‚
â”œâ”€â”€ services/                      # SHARED SERVICES - Cross-feature services
â”‚   â”œâ”€â”€ subscription_service.dart
â”‚   â””â”€â”€ (other shared services)
â”‚
â”œâ”€â”€ subscription/                  # Subscription Feature (if separate)
â”‚   â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ screens/
â”‚   â””â”€â”€ services/
â”‚
â””â”€â”€ web/                           # Web-specific code
    â””â”€â”€ landing_page.dart

================================================================================
                          ARCHITECTURE PATTERNS
================================================================================

1. FEATURE-FIRST STRUCTURE
   - Each feature is self-contained with its own controllers, services, screens
   - Features can be developed and tested independently
   - Easy to locate code related to a specific feature

2. SEPARATION OF CONCERNS
   â”œâ”€â”€ Controllers (Business Logic)
   â”‚   â””â”€â”€ Handle state management, user interactions, business rules
   â”œâ”€â”€ Services (Data Layer)
   â”‚   â””â”€â”€ Handle API calls, database operations, external services
   â”œâ”€â”€ Screens (UI Layer)
   â”‚   â””â”€â”€ Display UI, handle user input, delegate to controllers
   â””â”€â”€ Models (Data Structures)
       â””â”€â”€ Define data structures used across the app

3. STATE MANAGEMENT
   - Uses Provider pattern with ChangeNotifier
   - Controllers extend ChangeNotifier for reactive state updates
   - Screens consume state via Consumer or Provider.of

4. DEPENDENCY INJECTION
   - Services are instantiated in controllers
   - Controllers are provided via Provider at app level
   - Easy to mock for testing

================================================================================
                          IMPORT PATTERNS
================================================================================

1. FEATURE INTERNAL IMPORTS
   â””â”€â”€ Use relative paths within the feature
       Example: import '../controllers/tasks_controller.dart'

2. CROSS-FEATURE IMPORTS
   â””â”€â”€ Use absolute paths from lib root
       Example: import 'models/user_model.dart'

3. SHARED RESOURCES
   â””â”€â”€ Use absolute paths from lib root
       Example: import 'widgets/custom_button.dart'
       Example: import 'providers/language_provider.dart'

4. CORE UTILITIES
   â””â”€â”€ Use absolute paths from lib root
       Example: import 'core/theme/app_theme.dart'
       Example: import 'core/utils/validators.dart'

================================================================================
                          FILE NAMING CONVENTIONS
================================================================================

Controllers:    {feature}_controller.dart
Services:       {feature}_service.dart
Screens:        {feature}_screen.dart or {specific_name}_screen.dart
Models:         {entity}_model.dart
Widgets:        {widget_name}.dart (snake_case)
Constants:      {domain}_constants.dart

Examples:
- home_controller.dart
- tasks_service.dart
- onboarding_age.dart
- user_model.dart
- custom_button.dart

================================================================================
                          DEVELOPMENT WORKFLOW
================================================================================

1. ADDING A NEW FEATURE
   â”œâ”€â”€ Create feature directory: lib/features/{feature_name}/
   â”œâ”€â”€ Create subdirectories: controllers/, services/, screens/, widgets/
   â”œâ”€â”€ Create controller: {feature}_controller.dart
   â”œâ”€â”€ Create service: {feature}_service.dart
   â”œâ”€â”€ Create screens as needed
   â””â”€â”€ Register controller in main.dart MultiProvider

2. ADDING A NEW SCREEN
   â”œâ”€â”€ Create screen file in appropriate feature/screens/
   â”œâ”€â”€ Use Consumer or Provider.of to access controller
   â”œâ”€â”€ Delegate business logic to controller
   â””â”€â”€ Update routes if using named routes

3. ADDING BUSINESS LOGIC
   â”œâ”€â”€ Add logic to controller, not screen
   â”œâ”€â”€ Use service for data operations
   â””â”€â”€ Notify listeners when state changes

4. ADDING DATA OPERATIONS
   â”œâ”€â”€ Add methods to service
   â”œâ”€â”€ Service handles all Firebase/API calls
   â””â”€â”€ Controller calls service methods

================================================================================
                          MIGRATION STATUS
================================================================================

âœ… COMPLETED:
   - Feature structure created
   - Controllers and services implemented
   - Home feature restructured
   - Auth feature restructured
   - Tasks, Progress, Profile, Community, Reflection features created
   - Onboarding screens moved to features/onboarding/screens/

â³ IN PROGRESS:
   - Updating imports in moved files
   - Updating screens to use controllers
   - Moving widgets to appropriate feature folders

ğŸ“‹ TODO:
   - Update all screen files to use controllers via Provider
   - Move shared widgets to appropriate locations
   - Update main.dart routes
   - Remove old files from lib/screens/ after migration
   - Add unit tests for controllers and services

================================================================================
                          BEST PRACTICES
================================================================================

1. KEEP SCREENS THIN
   - Screens should only handle UI rendering
   - All business logic goes in controllers
   - All data operations go in services

2. USE PROVIDER CORRECTLY
   - Provide controllers at the app level
   - Use Consumer for reactive updates
   - Use Provider.of for one-time access

3. HANDLE ERRORS GRACEFULLY
   - Catch errors in controllers
   - Show user-friendly error messages
   - Log errors for debugging

4. KEEP FEATURES INDEPENDENT
   - Features should not directly import from other features
   - Use shared models for cross-feature data
   - Use services for cross-feature operations

5. FOLLOW NAMING CONVENTIONS
   - Use consistent naming across the project
   - Make file names descriptive
   - Group related files together

================================================================================
                          EXAMPLE USAGE
================================================================================

// In a Screen (lib/features/tasks/screens/daily_tasks_screen.dart)
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import '../controllers/tasks_controller.dart';
import '../../../widgets/habit_card.dart';

class DailyTasksScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Consumer<TasksController>(
      builder: (context, controller, child) {
        if (controller.loading) {
          return CircularProgressIndicator();
        }
        
        return ListView(
          children: controller.getFilteredHabits().map((habit) =>
            HabitCard(habit: habit)
          ).toList(),
        );
      },
    );
  }
}

// In a Controller (lib/features/tasks/controllers/tasks_controller.dart)
import 'package:flutter/foundation.dart';
import '../services/tasks_service.dart';
import '../../../models/habit_model.dart';

class TasksController extends ChangeNotifier {
  final TasksService _service = TasksService();
  List<HabitModel> _habits = [];
  
  Future<void> initialize() async {
    _habits = await _service.loadHabits();
    notifyListeners();
  }
}

// In a Service (lib/features/tasks/services/tasks_service.dart)
import 'package:cloud_firestore/cloud_firestore.dart';
import '../../../models/habit_model.dart';

class TasksService {
  Future<List<HabitModel>> loadHabits() async {
    // Firestore operations here
  }
}

================================================================================
                          END OF DOCUMENTATION
================================================================================

Last Updated: November 2024
Maintained by: Development Team

